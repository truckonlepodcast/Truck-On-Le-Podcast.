<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Truck On Le Podcast</title>
    <link rel="manifest" href="data:application/json;base64,eyJuYW1lIjoiVHJ1Y2sgT24gTGUgUG9kY2FzdCIsInNob3J0X25hbWUiOiJUcnVjayBPbiIsInN0YXJ0X3VybCI6Ii8iLCJkaXNwbGF5Ijoic3RhbmRhbG9uZSIsImJhY2tncm91bmRfY29sb3IiOiIjMWYyOTM3IiwidGhlbWVfY29sb3IiOiIjMWYyOTM3IiwiaWNvbnMiOlt7InNyYyI6ImRhdGE6aW1hZ2Uvc3ZnK3htbDtiYXNlNjQsUEhOMlp5QjNhV1IwYUQwaU1qRXlJaUJvWldsbmFIUTlJakV5TWlJZ2RtbGxkMEp2ZUQwaU1DQXdJREV5TWlBMU1qSWlJSGh0Ykc1elBTSm9kSFJ3T2k4dmQzZDNMbmN6TG05eVp5OHlNREF3TDNOMlp5STZQQ0psYkdsd2MyVWdjSGc5SWpZeElpQndlVDBpTVRjMElpQjNhV1IwYUQwaU1UWXdJaUJvWldsbmFIUTlJalEwSWlCbWFXeHNQU0lqTkRrME5qWTNJaUJmUGpWY2JtUmxabUVnYVdROUlsUWlJRjluUG1wY2JpQWdQSEJoZEdnZ1pEMGlUVEkzSURNNWFFTXhOMEF4TkRBeE9TNHdNVUU0TGpCQk9EQXdOakE1TlNBdE1TNDNOQzQzTURNeVFUTXpMall4UXpNekxqWXhJREV6T1M0eU55QTNOREl4TVRRNklETTRMakUwSURNeU5DODJOM2d0TmpKY2JrWmpiRzl6WldacGRHd3ZQZ289IiwidHlwZSI6ImltYWdlL3N2Zyt4bWwiLCJzaXplcyI6IjE5MngxOTIifV19">
    <meta name="theme-color" content="#1f2937">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', system-ui, sans-serif;
            background: linear-gradient(135deg, #1f2937 0%, #374151 100%);
            color: white;
            min-height: 100vh;
        }

        .container {
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
        }

        .logo {
            width: 120px;
            height: 120px;
            background: linear-gradient(45deg, #4f46e5, #06b6d4);
            border-radius: 20px;
            margin: 0 auto 20px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 48px;
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }

        .title {
            font-size: 28px;
            font-weight: bold;
            margin-bottom: 10px;
            background: linear-gradient(45deg, #4f46e5, #06b6d4);
            -webkit-background-clip: text;
            background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            opacity: 0.8;
            font-size: 16px;
        }

        .player-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            margin: 30px 0;
            backdrop-filter: blur(10px);
        }

        .current-episode {
            text-align: center;
            margin-bottom: 20px;
        }

        .episode-title {
            font-size: 18px;
            font-weight: 600;
            margin-bottom: 10px;
        }

        .episode-description {
            opacity: 0.8;
            font-size: 14px;
            line-height: 1.4;
        }

        .player-controls {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
        }

        .control-btn {
            background: rgba(255, 255, 255, 0.2);
            border: none;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            color: white;
            font-size: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .control-btn:hover {
            background: rgba(255, 255, 255, 0.3);
            transform: scale(1.1);
        }

        .play-btn {
            width: 70px;
            height: 70px;
            background: linear-gradient(45deg, #4f46e5, #06b6d4);
            font-size: 30px;
        }

        .progress-container {
            margin: 20px 0;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 3px;
            cursor: pointer;
        }

        .progress {
            height: 100%;
            background: linear-gradient(45deg, #4f46e5, #06b6d4);
            border-radius: 3px;
            width: 0%;
            transition: width 0.1s ease;
        }

        .time-display {
            display: flex;
            justify-content: space-between;
            margin-top: 10px;
            font-size: 12px;
            opacity: 0.7;
        }

        .episodes-section {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px;
            backdrop-filter: blur(10px);
        }

        .section-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 20px;
        }

        .episode-item {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .episode-item:hover {
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .episode-item h3 {
            font-size: 16px;
            margin-bottom: 5px;
        }

        .episode-meta {
            font-size: 12px;
            opacity: 0.7;
            margin-bottom: 8px;
        }

        .episode-desc {
            font-size: 14px;
            opacity: 0.8;
            line-height: 1.3;
        }

        .loading {
            text-align: center;
            padding: 40px;
            opacity: 0.7;
        }

        .error {
            background: rgba(239, 68, 68, 0.1);
            border: 1px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            padding: 20px;
            text-align: center;
            color: #fca5a5;
        }

        audio {
            width: 100%;
            margin: 10px 0;
        }

        .install-banner {
            background: linear-gradient(45deg, #4f46e5, #06b6d4);
            border-radius: 12px;
            padding: 15px;
            margin-bottom: 20px;
            text-align: center;
            display: none;
        }

        .install-btn {
            background: white;
            color: #1f2937;
            border: none;
            border-radius: 8px;
            padding: 10px 20px;
            font-weight: 600;
            cursor: pointer;
            margin-top: 10px;
        }

        @media (max-width: 480px) {
            .container {
                padding: 15px;
            }
            
            .title {
                font-size: 24px;
            }
            
            .logo {
                width: 100px;
                height: 100px;
                font-size: 40px;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="install-banner" id="installBanner">
            <div>üì± Installer l'application sur votre t√©l√©phone</div>
            <button class="install-btn" id="installBtn">Installer</button>
        </div>

        <div class="header">
            <div class="logo">üöõ</div>
            <h1 class="title">Truck On Le Podcast</h1>
            <p class="subtitle">Par Pro Diesel Bellechasse</p>
        </div>

        <div class="player-section">
            <div class="current-episode">
                <h2 class="episode-title" id="currentTitle">Chargement...</h2>
                <p class="episode-description" id="currentDesc">Pr√©paration de l'√©pisode...</p>
            </div>

            <div class="player-controls">
                <button class="control-btn" id="prevBtn">‚èÆ</button>
                <button class="control-btn play-btn" id="playBtn">‚ñ∂</button>
                <button class="control-btn" id="nextBtn">‚è≠</button>
            </div>

            <div class="progress-container">
                <div class="progress-bar" id="progressBar">
                    <div class="progress" id="progress"></div>
                </div>
                <div class="time-display">
                    <span id="currentTime">0:00</span>
                    <span id="duration">0:00</span>
                </div>
            </div>

            <audio id="audioPlayer" preload="metadata"></audio>
        </div>

        <div class="episodes-section">
            <h2 class="section-title">√âpisodes r√©cents</h2>
            <div id="episodesList">
                <div class="loading">Chargement des √©pisodes...</div>
            </div>
        </div>
    </div>

    <script>
        class TruckOnPodcastApp {
            constructor() {
                this.rssUrl = 'https://anchor.fm/s/ac4f88bc/podcast/rss';
                this.currentEpisodeIndex = 0;
                this.episodes = [];
                this.isPlaying = false;
                this.audioPlayer = document.getElementById('audioPlayer');
                
                this.initializeApp();
                this.setupEventListeners();
                this.setupPWA();
            }

            async initializeApp() {
                try {
                    await this.loadPodcastData();
                    this.renderEpisodes();
                    if (this.episodes.length > 0) {
                        this.loadEpisode(0);
                    }
                } catch (error) {
                    this.showError('Erreur lors du chargement du podcast');
                    console.error('Erreur:', error);
                }
            }

            async loadPodcastData() {
                // Simuler le chargement des donn√©es du podcast
                // En production, vous utiliseriez un proxy CORS ou une API backend
                this.episodes = [
                    {
                        title: "√âpisode 1 - Sur la route du succ√®s",
                        description: "Premier √©pisode de Truck On Le Podcast o√π nous parlons de la vie sur la route et des d√©fis du camionnage.",
                        audioUrl: "https://example.com/episode1.mp3",
                        duration: "45:30",
                        pubDate: "2024-01-15"
                    },
                    {
                        title: "√âpisode 2 - S√©curit√© routi√®re",
                        description: "Discussion approfondie sur l'importance de la s√©curit√© routi√®re pour les camionneurs.",
                        audioUrl: "https://example.com/episode2.mp3",
                        duration: "38:15",
                        pubDate: "2024-01-22"
                    },
                    {
                        title: "√âpisode 3 - Nouvelles technologies",
                        description: "Comment les nouvelles technologies transforment le monde du transport routier.",
                        audioUrl: "https://example.com/episode3.mp3",
                        duration: "42:10",
                        pubDate: "2024-01-29"
                    }
                ];
            }

            renderEpisodes() {
                const episodesList = document.getElementById('episodesList');
                
                if (this.episodes.length === 0) {
                    episodesList.innerHTML = '<div class="error">Aucun √©pisode trouv√©</div>';
                    return;
                }

                episodesList.innerHTML = this.episodes.map((episode, index) => `
                    <div class="episode-item" onclick="app.loadEpisode(${index})">
                        <h3>${episode.title}</h3>
                        <div class="episode-meta">${episode.duration} ‚Ä¢ ${new Date(episode.pubDate).toLocaleDateString('fr-FR')}</div>
                        <p class="episode-desc">${episode.description}</p>
                    </div>
                `).join('');
            }

            loadEpisode(index) {
                if (index < 0 || index >= this.episodes.length) return;
                
                this.currentEpisodeIndex = index;
                const episode = this.episodes[index];
                
                document.getElementById('currentTitle').textContent = episode.title;
                document.getElementById('currentDesc').textContent = episode.description;
                
                // Note: Les URLs audio sont des exemples. En production, vous auriez les vraies URLs depuis le RSS
                this.audioPlayer.src = episode.audioUrl;
                this.audioPlayer.load();
                
                this.updatePlayButton();
            }

            togglePlayPause() {
                if (this.isPlaying) {
                    this.audioPlayer.pause();
                } else {
                    // En l'absence d'URLs audio r√©elles, on simule la lecture
                    this.simulatePlayback();
                }
                this.isPlaying = !this.isPlaying;
                this.updatePlayButton();
            }

            simulatePlayback() {
                // Simulation de lecture pour la d√©monstration
                let currentTime = 0;
                const duration = 2700; // 45 minutes en secondes
                
                const interval = setInterval(() => {
                    if (!this.isPlaying) {
                        clearInterval(interval);
                        return;
                    }
                    
                    currentTime += 1;
                    this.updateProgress(currentTime, duration);
                    
                    if (currentTime >= duration) {
                        this.isPlaying = false;
                        this.updatePlayButton();
                        clearInterval(interval);
                    }
                }, 1000);
            }

            updatePlayButton() {
                const playBtn = document.getElementById('playBtn');
                playBtn.textContent = this.isPlaying ? '‚è∏' : '‚ñ∂';
            }

            updateProgress(currentTime, duration) {
                const progress = (currentTime / duration) * 100;
                document.getElementById('progress').style.width = `${progress}%`;
                document.getElementById('currentTime').textContent = this.formatTime(currentTime);
                document.getElementById('duration').textContent = this.formatTime(duration);
            }

            formatTime(seconds) {
                const minutes = Math.floor(seconds / 60);
                const remainingSeconds = Math.floor(seconds % 60);
                return `${minutes}:${remainingSeconds.toString().padStart(2, '0')}`;
            }

            previousEpisode() {
                if (this.currentEpisodeIndex > 0) {
                    this.loadEpisode(this.currentEpisodeIndex - 1);
                }
            }

            nextEpisode() {
                if (this.currentEpisodeIndex < this.episodes.length - 1) {
                    this.loadEpisode(this.currentEpisodeIndex + 1);
                }
            }

            setupEventListeners() {
                document.getElementById('playBtn').addEventListener('click', () => this.togglePlayPause());
                document.getElementById('prevBtn').addEventListener('click', () => this.previousEpisode());
                document.getElementById('nextBtn').addEventListener('click', () => this.nextEpisode());
                
                // Gestion de la barre de progression
                document.getElementById('progressBar').addEventListener('click', (e) => {
                    const rect = e.target.getBoundingClientRect();
                    const percent = (e.clientX - rect.left) / rect.width;
                    // En production, vous pourriez chercher √† cette position dans l'audio
                    console.log(`Chercher √† ${Math.round(percent * 100)}%`);
                });
            }

            setupPWA() {
                // Gestion de l'installation PWA
                let deferredPrompt;
                
                window.addEventListener('beforeinstallprompt', (e) => {
                    e.preventDefault();
                    deferredPrompt = e;
                    document.getElementById('installBanner').style.display = 'block';
                });

                document.getElementById('installBtn').addEventListener('click', async () => {
                    if (deferredPrompt) {
                        deferredPrompt.prompt();
                        const { outcome } = await deferredPrompt.userChoice;
                        if (outcome === 'accepted') {
                            document.getElementById('installBanner').style.display = 'none';
                        }
                        deferredPrompt = null;
                    }
                });

                // Enregistrer le service worker
                if ('serviceWorker' in navigator) {
                    navigator.serviceWorker.register('data:application/javascript;base64,Y29uc3QgQ0FDSEVfTkFNRSA9ICd0cnVjay1vbi1wb2RjYXN0LXYxJzsKY29uc3QgdXJsc1RvQ2FjaGUgPSBbCiAgJy8nLAogICcvaW5kZXguaHRtbCcKXTsKCnNlbGYuYWRkRXZlbnRMaXN0ZW5lcignaW5zdGFsbCcsIGV2ZW50ID0+IHsKICBldmVudC53YWl0VW50aWwoY2FjaGVzLm9wZW4oQ0FDSEVfTkFNRSkudGhlbihjYWNoZSA9PiBjYWNoZS5hZGRBbGwodXJsc1RvQ2FjaGUpKSk7Cn0pOwoKc2VsZi5hZGRFdmVudExpc3RlbmVyKCdmZXRjaCcsIGV2ZW50ID0+IHsKICBldmVudC5yZXNwb25kV2l0aCgKICAgIGNhY2hlcy5tYXRjaChldmVudC5yZXF1ZXN0KS50aGVuKHJlc3BvbnNlID0+IHsKICAgICAgcmV0dXJuIHJlc3BvbnNlIHx8IGZldGNoKGV2ZW50LnJlcXVlc3QpOwogICAgfSkKICApOwp9KTs=')
                        .then(() => console.log('Service Worker enregistr√©'))
                        .catch((error) => console.log('Service Worker √©chou√©:', error));
                }
            }

            showError(message) {
                document.getElementById('episodesList').innerHTML = `<div class="error">${message}</div>`;
            }
        }

        // Initialiser l'application
        const app = new TruckOnPodcastApp();
    </script>
</body>
</html>
